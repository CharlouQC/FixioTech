<html>
<head>
    <title>backend\config\databaseConnexion.js</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">backend\config\databaseConnexion.js (<b>23</b> lines of code) (<a href="databaseConnexion.js">raw</a>):</h3>
<div id="editor">import mysql from &quot;mysql2/promise&quot;;
import dotenv from &quot;dotenv&quot;;
import process from &quot;process&quot;;

// CRITICAL: Charger dotenv ICI avant d'utiliser process.env
// car les imports ES6 sont hoist&eacute;s avant l'ex&eacute;cution de app.js
dotenv.config();

const ssl =
  process.env.DB_SSL === &quot;true&quot;
    ? { rejectUnauthorized: true, minVersion: &quot;TLSv1.2&quot; }
    : undefined;

export const db = mysql.createPool({
  host: process.env.DB_HOST || &quot;127.0.0.1&quot;,
  port: Number(process.env.DB_PORT || 3306),
  user: process.env.DB_USER || &quot;root&quot;,
  password: process.env.DB_PASSWORD || &quot;&quot;,
  database: process.env.DB_NAME || &quot;&quot;,
  ssl,
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0,
});

export async function assertDb() {
  const [rows] = await db.query(&quot;SELECT 1 AS ok&quot;);
  return rows[0]?.ok === 1;
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/javascript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
