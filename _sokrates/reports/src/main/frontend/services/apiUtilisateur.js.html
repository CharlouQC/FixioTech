<html>
<head>
    <title>frontend/services/apiUtilisateur.js</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">frontend/services/apiUtilisateur.js (<b>49</b> lines of code) (<a href="apiUtilisateur.js">raw</a>):</h3>
<div id="editor">import { httpJson, buildUrl, apiRequest } from &quot;httpClient.js&quot;;

const API_URL =
  import.meta.env.VITE_API_URL || &quot;http://localhost:3000/api/utilisateurs&quot;;

const buildUserUrl = (path = &quot;&quot;) =&gt; buildUrl(API_URL, path);

async function getUtilisateurs() {
  return httpJson(buildUserUrl());
}

async function getUtilisateur(id) {
  return httpJson(buildUserUrl(`/${id}`));
}

async function addUtilisateur(utilisateur) {
  const payload = {
    email: utilisateur.courriel,
    mot_de_passe: utilisateur.mot_de_passe,
    nom_complet: utilisateur.nom_complet,
    role: utilisateur.role || &quot;client&quot;,
  };

  return apiRequest(API_URL, &quot;POST&quot;, &quot;&quot;, payload);
}

async function loginUtilisateur(utilisateur) {
  const payload = {
    email: utilisateur.courriel,
    mot_de_passe: utilisateur.mot_de_passe,
  };

  return apiRequest(API_URL, &quot;POST&quot;, &quot;/login&quot;, payload);
}

async function updateUtilisateur(id, updates) {
  return apiRequest(API_URL, &quot;PUT&quot;, `/${id}`, updates);
}

async function deleteUtilisateur(id) {
  return apiRequest(API_URL, &quot;DELETE&quot;, `/${id}`);
}

async function getEmployes() {
  return httpJson(buildUserUrl(&quot;?role=employe&quot;));
}

async function getEmployesDisponibles(dateISO, heureHHmm) {
  const qs = new URLSearchParams({ date: dateISO, heure: heureHHmm });
  return httpJson(buildUserUrl(`/disponibles?${qs.toString()}`));
}

export {
  getUtilisateurs,
  getUtilisateur,
  addUtilisateur,
  loginUtilisateur,
  updateUtilisateur,
  deleteUtilisateur,
  getEmployes,
  getEmployesDisponibles,
};
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/javascript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
